<div class="container">
  <div class="card">
    <div class="card-header">
      @if (permissions().canManage) {
      <app-button
        [variant]="'primary'"
        [additionalClasses]="'float-end'"
        [dataCy]="'button-add'"
        (click)="addFunction()"
        ><app-icon icon="plus-circle"></app-icon> Add function</app-button
      >
      }
    </div>
    <div class="card-body">
      <div class="table-responsive">
        <table class="table table-sm table-striped">
          <thead>
            <tr>
              <th scope="col" class="w-100">Function Name</th>
              <th scope="col" class="text-center">Actions</th>
            </tr>
          </thead>
          <tbody>
            @for (function of functions(); track function; let idx = $index) {
            <tr>
              <td class="align-middle">{{ function.name }}</td>
              <td class="text-nowrap text-center">
                @if (permissions().canView) {
                <app-button
                  [variant]="'link'"
                  [size]="'sm'"
                  [dataCy]="'button-edit'"
                  [additionalClasses]="'me-0'"
                  (click)="editFunction(function)"
                >
                  <app-icon icon="pencil"></app-icon
                ></app-button>
                }
                @if (permissions().canManage) {
                <app-button
                  [variant]="'link'"
                  [size]="'sm'"
                  [additionalClasses]="'me-0 link-danger'"
                  [dataCy]="'icon-delete'"
                  (click)="deleteFunction(function)"
                  ><app-icon icon="trash"></app-icon
                ></app-button>
                }
              </td>
            </tr>
            } @empty {
            <tr>
              <td colspan="2" class="text-center">No functions defined</td>
            </tr>
            }
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
