<app-loading-indicator [isLoading]="isLoading()"></app-loading-indicator>
<app-tile-component
  [title]="'Properties'"
  [actionName]="'New Property'"
  [canAction]="true"
  [isVisible]="true"
  (tileAction)="addProperty()"
  [noContent]="false"
  [notAllowed]="false"
>
  <div class="resource-properties-container">
    <div class="properties-header">
      @if (hasChanges()) {
        <div class="action-buttons">
          <app-button [variant]="'secondary'" [size]="'sm'" (click)="resetChanges()">Cancel</app-button>
          <app-button [variant]="'primary'" [size]="'sm'" (click)="saveChanges()" [disabled]="isSaving()">
            {{ isSaving() ? 'Saving...' : 'Save Changes' }}
          </app-button>
        </div>
      }
    </div>

    @if (errorMessage()) {
      <div class="error-banner">{{ errorMessage() }}</div>
    }

    @if (successMessage()) {
      <div class="success-banner">{{ successMessage() }}</div>
    }
  </div>
  <div class="properties-section">
    <div class="properties-list">
      @if (showAppNameProperty()) {
        <app-property-field
          [property]="appNameProperty()"
          [isInstanceContext]="true"
          (valueChange)="onPropertyChange(appNameProperty().name, $event)"
        ></app-property-field>
      }

      <app-property-field
        [property]="outOfServiceProperty()"
        [isInstanceContext]="true"
        (valueChange)="onPropertyChange(outOfServiceProperty().name, $event)"
      ></app-property-field>

      @for (property of properties(); track property.name) {
        <app-property-field
          [property]="property"
          [isInstanceContext]="true"
          (valueChange)="onPropertyChange(property.name, $event)"
        ></app-property-field>
      }
    </div>
  </div>
</app-tile-component>
