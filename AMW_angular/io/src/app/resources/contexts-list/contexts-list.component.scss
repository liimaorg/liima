:host {
  display: block;
  min-width: 250px;
}

ul {
  position: relative;

  // Only apply lines to the deepest nested ul (level-3 items)
  ul {
    ul {
      position: relative;

      .nav-item {
        position: relative;

        // Vertical line connecting level-3 items
        &::before {
          margin-left: 1.4rem;
          content: '';
          position: absolute;
          left: 4px;
          top: 0;
          bottom: 0;
          width: 1px;
          background-color: var(--bs-gray-300);
        }

        // Start line at center for first item
        &:first-child::before {
          //top: 50%;
        }

        // End line at center for last item
        &:last-child::before {
          bottom: 50%;
        }

        // Horizontal line to indicator
        &::after {
          margin-left: 1.4rem;
          content: '';
          position: absolute;
          left: 4px;
          top: 50%;
          width: 12px;
          height: 1px;
          background-color: var(--bs-gray-300);
          transform: translateY(-50%);
        }
      }
    }
  }
}

.nav-link {
  cursor: pointer;
  display: flex;
  align-items: center;
  transition: all 0.2s ease;
  position: relative;
  z-index: 1;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;

  &:hover {
    background-color: rgba(0, 0, 0, 0.03);
    border-radius: 4px;
    font-weight: bold;

    .circle {
      background-color: var(--bs-link-hover-color);
    }
  }

  &.active {
    font-weight: 600;
    border-radius: 4px;
    background-color: rgba(0, 0, 255, 0.03);

    .circle {
      background-color: var(--bs-link-color);
      box-shadow: 0 0 0 3px rgba(13, 110, 253, 0.2);
    }
  }
}

.circle {
  display: inline-block;
  min-width: 7px;
  min-height: 7px;
  border-radius: 50%;
  margin-left: 0.5rem;
  margin-right: 8px;
  flex-shrink: 0;
  transform: translateZ(0); // Force GPU acceleration for smoother rendering
  backface-visibility: hidden; // Improve rendering quality
  will-change: transform; // Optimize for animations
}

.level-1 {
  background-color: var(--bs-dark); // Bootstrap primary for top level (domains)
}

.level-2 {
  background-color: var(--bs-gray); // Bootstrap info for second level (environments)
}

.level-3 {
  background-color: var(--bs-info); // Bootstrap light for third level (sub-environments)
}
