<div class="container">
  @if (resourceType() && permissions().canReadResources) {
    <h1>
      {{ resourceType().name }}
      @if (permissions().canDeleteResourceType && !resourceType().isDefaultResourceType) {
        <app-button [variant]="'link'"
                    [additionalClasses]="'link-danger'"
                    (click)="deleteResourceType()">
          <app-icon icon="trash"></app-icon>
        </app-button>
      }
    </h1>
    <app-button [variant]="'primary'" [additionalClasses]="'mt-1'">
      <app-icon icon="pencil"></app-icon>
      Edit Resource type
    </app-button>
    <h2 class="mt-5">Resources</h2>
    @if (permissions().canCreateResource && !resourceType().isApplication) {
      <div class="row my-3">
        <app-button [variant]="'primary'" (click)="addResource()">
          <app-icon icon="plus-circle"></app-icon>
          New Resource
        </app-button
        >
      </div>
    }
    <table class="table table-sm table-striped">
      <thead>
      <tr>
        <th>Resource name</th>
        <th>Release</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      @for (resource of resourceGroupList(); track resource.id) {
      <tr>
        <td>{{ resource.name }}</td>
        <td>{{ resource.defaultRelease ? resource.defaultRelease.release : '' }}</td>
        <td>
          <a
            href="/AMW_web/pages/editResourceView.xhtml?ctx=1&id={{
              resource.defaultResourceId ? resource.defaultResourceId : resource.id
            }}"
          >
            <app-button [variant]="'primary'" [size]="'sm'"> <app-icon icon="pencil"></app-icon></app-button>
          </a>
        </td>
      </tr>
      }
    </tbody>
  </table>
  }
</div>
